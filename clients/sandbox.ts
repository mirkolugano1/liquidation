import { CloudStorageManager } from "../common/cloudStorageManager";
import common from "../common/common";
import encryption from "../common/encryption";
import fileUtilities from "../common/fileUtilities";
import keccak from "../common/keccak";
import healthFactorCheckEngine from "../engines/healthFactorCheckEngine";
require("dotenv").config();

async function main() {
    /*
    let a = "8238413e3a3b3b2e4abe37fc66b32cf935117b7e96ad7776f8f88b2060097ea0";
    let b = await encryption.encrypt(a, process.env.ENCRYPTIONPWD!);
    console.log(b);
    */
    /*
    let lineLength = 42;
    let input =
        "0xa25a7086a507c8934c53d3d8e3c9c88b6c7f0e510x35bb522b102326ea3f1141661df4626c87000e3e0x9d41c114173e91e3127f7c2741644f25727771480xadc0a53095a0af87f3aa29fe0715b5c28016364e0xcb53cd7464c4976c860cbd689257ca05678211e20x339d11e9ce6399b34297ed6458605b6e24303fcd0x183e77b95671c4c36f47cea7707b3081abd5ff300x78f8bd884c3d738b74b420540659c82f392820e00xc76da03156e479eea04498ce0dacd5da62276dee0x497fcc3607dda7ecf5f492ef0390d0f8200792a90x74de5d4fcbf63e00296fd95d33236b97940166310x5141b82f5ffda4c6fe1e372978f1c5427640a1900x6ee1ea175386bd1acb6a9874593cd579513b1b8e0xa434d495249abe33e031fe71a969b81f3c07950d0x86e2ea224b980f7acaaf1f368ab2ed689e0a21d70xfb4cb868727d9622258bf2b26a8cfc95f67426690x2e349bde5c34dc16e655e98d30ff93a2618859740x1231deb6f5749ef6ce6943a275a1d3e7486f4eae0x904fa2e9a66a586f60320f14a19e0fd7ddfc48a60x012405e9ad437e086c4b52fdab3815a655a3c9a80x83c61fa6981cd0781d67a084c170dde124d322800xd662900cc5b4741c77bc3cb84da51027d06d388f0xb785c4b50cd157e3c6f7e48cb935d335a9a769c30xd9bd04be0ece9095580756db19c81d9700b4f2fe0xfb960a2deb5ca509ae2f4402696375c0991830e70xe719f7a5bfe793e0d21d574bbedf927801e33a020xfa320a7586e05f283e1c3e22c77885de29a0311d0xcd6b1c406e9a8da31162527c40a90343b5bb9cfb0x7bee7eb0b388e9b257ec9e7b16f283d102f0452f0x608b3c93b028368f6609515cbcc4cc8caf1a59960xd4c87197131d11b09eb6666297506327429dca080x34e1a69c42e620ec166ad5ca734cc9edc53b20930xf54ba005b2da9d137ffb4fae4481a76a59f36ac40xc5ec4153f98729f4eaf61013b54b704eb282ecf40xb8f5c0d45667a0bb070cb28eef5ab3d78c6e2d8a0x888888888889758f76e7103c6cbf23abbf58f9460xc85b256c084b7936d21584490dd5fbba6c63cfeb0x26a5994176d34d128c5e6ab80fa0882a7df4ff000x8ac1a123de6f3ddbeed0b8aae0cf62246ff36f4b0xb746b1395105954023559d5e8149d4ce8c5566460x01f58f1e9ff6bbd9754b4e966307daeb0f8a5a470x135af28fb1539a1a5061a56f0e524d578e5d369f0xf536b73dfbbe43ddb5ee1186659d3b6db0d3e5060x2c406fd38b249d20bbea3d7f507acfff1521bc6e0xdd5f9ee207d52cd6a4f1a971a42a21a454f8c47c0x0000000000a0aa7908bda39fbb8f95e5a0a6ee420x7863cbc4351ec7aebe03d130d3d58874ff8ce98a0x4b5d730ecce6e92c658675fa22479cd5798311480x03e5637c67b82af9b204187c5e89c4bfff5270e30xfcff1d7fb147d8206d80f59ba7c866ea7edb23c60x99bb42314926d77840c10441e1377f5aae0c78c60x2d36a0131e3c90628230ae9199943be91d26836d0x68461d5b195502ef62f34b82636fe557730cda200x2edf27af09e71e600c16bdc6a79e4cc11b5bb9f50x4e0985e556069b3d69f4e76db3e2b8d2b50479560xceb0b1c7d420962ae40ee7d7931836cf84097c280xc36c872a4f9ced5013e1bb0dda4bd2d35a0534780x91aadbbff95354b38fd2aef576f2ea5865cee5910x2fca023d3dfda9600baa5bc26bc4d7ebf32e6f9d0xead82e5508e6ce9f3b22605d3035eca50615f01d0x8d0521c7748e47369794cd346fb61ad31b0a2b030xf5336bc8ecba1aed21fcf4cb57c2e3023b0f88da0x9df5680d8dc866ad154dc07a7dc1c418dc60c96c0x69ef9e18c5083862a260e5964a986f14fa1454a50x4e050415bf147bbc50197a10fdb3a0e8c56526e70x35d66d787ef614748428f0d1543f5660b07e560c0x9536d7cd239d9b7bf14aafc1a4feb72f770ef5a20xa4a215014e52ec80cfdca1d04e9d4c796d063c590x5d926748f006b49e13192ea2dfea2cb8d9b023100xdc3c277932f44a1bcb3956164bb9a2a177c63f460x5675958ef081f0f2eb55c41a126ea52aa32295da0x26e5bd6a1b5bd432540b8eac73a4c20640b6b44e0x482453f312336d7a425ecc6d84f81b15be4cc1d30xe75ed6f453c602bd696ce27af11565edc9b46b0d0x00000000009e50a7ddb7a7b0e2ee6604fd120e490x8940b41b4b0ba2d795259c6f80cf1587ddba9cde0x680d0b3e9bcc817749732860b2f88bbd3a592e7b0xd58dcd4594087c2758717a59f44a5ac09db651050x58d9461dd8b0a7ef1f50053be1247f7cc77ed4c10x5e32ac4cd05511ea24dbcfc9cc216337106337660x343135631e7c4fad8ac21bf44c15ae9d08d1f3290xcab9cbb875d81f5d5400ee2f30774a74c8ee98ba0x38324304aef3f78faae233d4bfe67662648b5cc50x0742f61df922b7c310a01ff7bcfb197e213d5f170xf259e9d9b81d888bcac636e1af244b49f3591c0e0xff8d044c63d7da1a23e11765764d37def8f6670f0x3cdd78ac8c72570dbfad9083115dfdd33d5b475b0x155d2915f96dec60831938a0bdab51df6059f9090x55dbaec5e20f68408f577ee3d7134adc021749420x11ab228351ad0c1334963968b41489a235712da40xfd20769fe61f7138cb90b587be1a93dc515d09480xa262f46929346c1e5434e6f8e4c5ef1b7a9fa5e70x3b9ffd4ceffd768df16d79e7492a1bffd087c44f0xa53e815d96c9d669ac5c542f31f5123dd112966f0x943701385ed88637928109c2e3be2f9e450a4df90x523fceaa5855a69fb2df08644901b00216ef420b0xf82e0bbeb02f9dc9eeb6d31ea4033d77c88763a20x9808c20e98b322161f02a19af49fca2521d49c100x39dd637623b23ef4f1424aef61414d6cfccee3d30x17cd33bdc133fc0894020cb74f71684b99526f390x2d0974849a098737e730913caeaad22e63606ddf0x24b4ec73f551129e9cc050f5265d2171b6c07deb0xfd914b1f1b440c7282eea6523ed2a1eb0125ea930xbd128f2b11b9f9885be63a844eaa25eafcc6c8670xb9ce960b2af4b5e0bd6cb15e24454b38a56cba530x592047f768937c9f2f7f6588788dbe42de5bfc170x91f2b27eb31297b0fa19cde3cf16e66af9d853da0xb18e3c41faf4139b89b4ebf1f5ef645a3ad0ec7f0x5c98d2a99ceea22c3abf78ef4be423e64f51c6000x250276b35d3379f29ae3636ad5c39f5c44901e2c0x7a641d08111f20ab5cb6f46a5009c860ed73aea40xfd69e9375ebafe700e70dc95464810e4703b53d70x72e93123e8b5d168246739cdc45360ea112093640x13f67ac110fae7609e8a29d734dc7d265e700bcb0x53a0e1553484e81fce09d05750e347609b1c7f520x98ccb155e86bb478d514a827d16f58c6912f9bdc0x42954096d04330a105232594c9298d0e46d0f01d0xe10706038ce22b8971ff75959311ceef0f00814f0x3174590cc2ee977023305583cc84cba046152f290x8b268b9870ced140e2679a17cc8ec20f60ae46720xb3dd76482480eed42d2097342cd8cd8f605ec1b40xce8a3b66c5509e7be0f65485f95b69159da870e40x9363277b7a747dd6e2a1e1eafb6a3bd7ec1542b00x17fdc6f269a3686fc8f9329f098331cc5cd573840x2028153fa64b4eef08c02aa5b2daea73a4f68fa00x71c04692c7cb668c08b500a84166412ced8b33110xfe0ad8e5025fa9e03a02fab9d94c4c11ab164bea0x852ccb64e91b82c30e54b58df364b23f4c2f03120xa3c2cc039d5bab4a36d4295109eac40d7096fe990x912e8664959f69e698c296810e50298a4faaa6c40xe6a52260694aa80fa0ca152acdc868dea4566f2a0xfc4b2a62a06cb2e1c6a743e9ae327bb16977e4c10x44a427518a1afd356dab0f4c521331f2c8771fa70xd1057b6c6736bf4f5b4a850cff02054f1f38e5810xa6eeb51c2aa5c73388ebed57bc0640e87a76032b0x0c5596f1a73984824bc85f986ee06aedbbbe78aa0xfe837a3530dd566401d35befcd55582af7c4dffc0xf53de9ced0686b1347640ddc7fb06b84ff6faa090x5d153790e5aef18b3d0272506b77955f669ac3ca0x49c2b2cfa87a773372c7353ec23da648c06838dd0xe27f66e47081dc36dc418ca1b58b78c4ccd5bae00xd73ed3cde005b195350b3024ecb39c1159f716150x00c600b30fb0400701010f4b080409018b9006e00xb2fcaadb6147265c10b03852c879957a4a1a78370x8faabf25b41adbd74ca77c9e000d3635e0758ee60x2b7d218defe25645118a9f862b2a830405b6c1070xdaee0331d89bc78641876792a1e5b34910f6ff5b0x8bcca28bd549be46639f23793b2832ab241e79530x537037c5ae805b9d4cecab5ee07f12a8e59a15b20xed0c6079229e2d407672a117c22b62064f4a43120x0e5356450c954d06d85ed0cd1e84d64ae5588bfd0x272c39c82ca9f10e5338a6ee75927cfe00c82e2c0xe1b4e4d6320c65748a1900cf0329cb7221959d8a0xb9c062e9a2145671b792654ec0c38376392cb62e0xafe5937f6309311152c8677a9150b5b104e8f9c50x6b84a652aa0a9552003088b4e28ee52fb0f8a9300xe4912ea3af6724e79c424dcc0afb59fdb1465d060xd7f6f541d4210550ca56f7b4c4a549efd4cafb490x15391e14a74a808f5e7a2055e755bd7f3db97f400x644539166663a258a3d057d67a4df3d69c2185ed0xd6a154f5ec85948a5a5811ee0d9a124c68b2311b0x78aa84311a06db2dd390f0d505c60c6400073c8d0xbce933f1a1a0eafb7699c71c683f028c1ef70dc50x8a881fb7bc78796e206bdd61cba223df44316f900x0991d02f28a5283338e9591cbf7de2eb25da46cd0xd22690e133a432f14226452ce88d92311429a0b70x68e397a4f9b8e7da5c28e2ff765a3dc5512333580x8870c4b9be41fe34511784177dc7b8b05353d9860x68b512bc1e2d9fbb24d2abd40a32ed8c70ff66b10xbf656f3b816a1e4028ff32635e97a28bf5b882060xa94dce69591512fd4ce4a37d5477a8c6fd28f6120xfa21da6fb57b9d83d9cdbfe466922564972f647c0x55f6e3299bef0356ef624aa818a76aab963fa7220x63016ba86538abcd8c14a8ba4304add12649fd5c0x66639d1d6b1e6a5a0fba9d980cec2ae4828cabca0xc37704a457b1ee87eb657cae584a34961e86acac0x5363c32d81266cbe7e00e867a11462c3bfc771c90xfc2b1081545f66ca31411d0949408b226c0125d10x45102167a4a1df0d9b65f33a4f7146b76f0761420xe0a0f2968416c5fc69026c59cc6db5ff845c31bb0xf94b9f46d29bf346e43f9dee456f3227c27ec9c90x43ad8350ffcd42c52a09f8ae300572b2f9760a290x166ba8618c7b6e6057e5d44d8a35c0752bbadfa50x82a72ecdf9267a6b031c6139b57a9347b9ef42b40xccb66678b7d4c65b5ee92a41744075b60a293ed40x29c3ed9aab657c5a3daafc7c0596b3b9b91392ab0xa13c729b9681ff526a5108d43a37d0c1983cfebe0x1980475c3a279935ca611c9a41f17974ebc2e050";
    let result = "";
    for (let i = 0; i < input.length; i += lineLength) {
        result += input.substring(i, i + lineLength) + "\n";
    }
    await fileUtilities.appendToTextFile("/home/data/addresses.txt", result);
*/
    /*
    let a = process.env.PRIVATEKEYENCRYPTED!;
    let d =
        "d0d5304c8190472d2ea4931278b9b9a3d4f7642a92a8ea266ea42391af2c2b51d237e9b82be3248cfc5433c1fc4ece43bbb1da0d4c460ddb7fcb811d154bf005ae4c4a24b215f30a34d11930f3ca5019df5b3ae4dea0d23b5ebcc37a505fe15c";
    console.log(a == d);

    let b = await encryption.decrypt(a, process.env.ENCRYPTIONPWD!);
    console.log(b);
    */
    //let c = await encryption.decrypt(b, process.env.ENCRYPTIONPWD!);
    //console.log(c);
    await healthFactorCheckEngine.initializeHealthFactorCheckLoop();
    await healthFactorCheckEngine.performHealthFactorCheckLoop();
}

main()
    .then(() => process.exit(0))
    .catch((error) => {
        console.error("Error:", error);
        process.exit(1);
    });
